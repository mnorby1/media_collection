{"ts":1342066258947,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"window.HeaderView = Backbone.View.extend({\n    initialize:function(){\n      _.bindAll(this,'render');  \n    },\n        tagName:\"div\",\n        className:\"navbar navbar-fixed-top\",\n        template : _.template($(\"#template-header\").html()),\n    \n    render:function(){\n        console.log(\"Rendering the header\");\n        $(this.el).html(this.template());\n        return this;\n    }\n});\nwindow.MovieListView = Backbone.View.extend({\n    tagName:\"ul\",\n    className:\"nav nav-pills nav-stacked\",\n    initialize:function(){\n        _.bindAll(this,'render');\n        App.Collections.movies.bind(\"add\",this.render,this);\n        App.Collections.movies.bind(\"reset\",this.render,this);\n        App.Collections.movies.bind(\"remove\",this.render,this);\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        //this.collection.each(function(model){\n        App.Collections.movies.each(function(model){\n            $($ul).append(new window.MovieItemView({model:model}).render().el);\n        });\n        return this;\n    },\n});\nwindow.MovieItemView = Backbone.View.extend({\n    tagName:\"li\",\n    className:\"\",\n    events:{\n      \"click .movieListItem\":\"changeActive\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n        //App.Collections.movies.on(\"removeActive\",\"removeActive\");\n        this.bind(\"removeActive\",this.removeActive,this);\n        this.template = _.template($(\"#template-movie-item\").html());\n        //console.log(\"template init: \",$(\"#template-movie-item\").html());\n    },\n    render:function(){\n        $(this.el).html(this.template({model:this.model.toJSON()}));\n        return this;\n    },\n    changeActive:function(){\n        console.log(\"Changing the active state\");\n        $(\".movieListItem\").parent().removeClass(\"active\");\n        App.Collections.movies.trigger(\"removeActive\");\n        $(this.el).addClass(\"active\");\n    },\n    removeActive:function(){\n        $(this.el).removeClass(\"active\");\n    }\n});\nwindow.MovieDetailView = Backbone.View.extend({\n    tagName:\"div\",\n    events:{\n      \"click .addEditContent\":\"displayAddEditForm\",\n      \"click .save\":\"saveMovie\",\n      \"click .remove\":\"removeMovie\",\n      \"click .starRating\":\"changeStarRating\",\n      \"click .addActorField\":\"addActorField\",\n      \"click .removeActorField\":\"removeActorField\",\n      \"click .addActressField\":\"addActressField\",\n      \"click .removeActressField\":\"removeActressField\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n    },\n    render:function(){\n        this.template = _.template($(\"#template-movie-details\").html());\n        var isNew = this.model.isNew();\n        $(this.el).html(this.template({model:this.model.toJSON(),isNew:isNew}));\n        return this;\n    },\n    displayAddEditForm:function(){\n        if($(\".addEditContent\").hasClass(\"btn-primary\")){\n            $(\".addEditContent\").removeClass(\"btn-primary\");\n            $(\".addEditContent\").addClass(\"btn-warning\");\n            $(\".editContent\").removeClass(\"hiddenContent\");\n            $(\".displayContent\").addClass(\"hiddenContent\");\n        }\n        else{\n            $(\".addEditContent\").removeClass(\"btn-warning\");\n            $(\".addEditContent\").addClass(\"btn-primary\");\n            $(\".editContent\").addClass(\"hiddenContent\");\n            $(\".displayContent\").removeClass(\"hiddenContent\");\n        }\n    },\n    saveMovie:function(){\n        var actorsArray = [];\n        $(\".actors\").children('input').each(function(){\n            actorsArray.push($(this).val());\n        });\n        var actressArray = [];\n        $(\".actresses\").children('input').each(function(){\n            actressArray.push($(this).val());\n        });\n        this.model.set({\n            title:$(\"#titleInput\").val(),\n            year:$(\"#yearInput\").val(),\n            director:$(\"#directorInput\").val(),\n            actors:actorsArray,\n            actresses:actressArray,\n            genre:$(\"#genreInput\").val()\n        });\n        console.log(\"Save model:\",this.model);\n        App.Collections.movies.add(this.model);\n        this.model.save();\n        App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n        this.render();\n    },\n    removeMovie:function(){\n      var yes = confirm(\"Are you sure you want to remove this movie? This action is irreversable.\");\n      if(yes){\n          this.model.destroy();\n          App.Collections.movies.remove(this.model);\n          App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n      }\n    },\n    changeStarRating:function(event){\n        var $clickedStar = $(event.currentTarget);\n        var value = $clickedStar.attr(\"rating\");\n        this.model.set({stars:value});\n        this.changeStarVisual(value);\n    },\n    changeStarVisual:function(starRating){\n        $(\".starControl\").children('img').each(function(index){\n            if(index+1 <= starRating){\n                $(this).attr('src',\"img/star-gold16.png\");\n            }\n            else{\n                $(this).attr('src',\"img/star-white16.png\");\n            }\n        });\n    },\n    addActorField:function(){\n        var $currentIcon = $(\".actors\").children(\".addActorField\").children('img');\n        $(\".actors\").children(\".removeActorField\").remove();\n        $(\".actors\").children(\".addActorField\").addClass(\"removeActorField\");\n        $(\".actors\").children(\".removeActorField\").removeClass(\"addActorField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actors\").append('<br><input type=\"text\" class=\"input-xlarge actor\">' + \n            '<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActorField:function(){\n        $(\".actors input:last\").remove();\n        $(\".actors br:last\").remove();\n        $(\".actors span\").remove();\n        $(\".actors\").children('input').each(function(){\n            $(\".actors\").children(\".removeActorField\").remove();\n            $(\".addActorField\").addClass(\"removeActorField\");\n            $(\".removeActorField\").removeClass(\"addActorField\");\n            $(\".removeActorField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    },\n    addActressField:function(){\n        var $currentIcon = $(\".actresses\").children(\".addActressField\").children('img');\n        $(\".actresses\").children(\".removeActressField\").remove();\n        $(\".actresses\").children(\".addActressField\").addClass(\"removeActressField\");\n        $(\".actresses\").children(\".removeActressField\").removeClass(\"addActressField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actresses\").append('<br><input type=\"text\" class=\"input-xlarge actresss\">' + \n            '<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActressField:function(){\n        $(\".actresses input:last\").remove();\n        $(\".actresses br:last\").remove();\n        $(\".actresses span\").remove();\n        $(\".actresses\").children('input').each(function(){\n            $(\".actresses\").children(\".removeActressField\").remove();\n            $(\".addActressField\").addClass(\"removeActressField\");\n            $(\".removeActressField\").removeClass(\"addActressField\");\n            $(\".removeActressField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    }\n});"]],"start1":0,"start2":0,"length1":0,"length2":7492}]],"length":7492}
{"contributors":[],"silentsave":false,"ts":1342289059400,"patch":[[{"diffs":[[1,"window.HeaderView = Backbone.View.extend({\n    initialize:function(){\n      _.bindAll(this,'render');  \n    },\n        tagName:\"div\",\n        className:\"navbar navbar-fixed-top\",\n        template : _.template($(\"#template-header\").html()),\n    \n    render:function(){\n        console.log(\"Rendering the header\");\n        $(this.el).html(this.template());\n        return this;\n    }\n});\nwindow.MovieListView = Backbone.View.extend({\n    tagName:\"ul\",\n    className:\"nav nav-pills nav-stacked\",\n    initialize:function(){\n        _.bindAll(this,'render');\n        App.Collections.movies.bind(\"add\",this.render,this);\n        App.Collections.movies.bind(\"reset\",this.render,this);\n        App.Collections.movies.bind(\"remove\",this.render,this);\n    },\n    events:{\n        \"click .sortMovieList\":\"sortMovieList\"\n    },\n    sortMovieList:function(event){\n        var sortType = $(event.currentTarget.attributes.name).val();\n        this.collection.sortMovieList(sortType);\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        var $sortOptions = $($ul).append('<div id=\"sortOptions\"></div>');\n        $sortOptions.append('<button class=\"sortMovieList\" name=\"asc\"><img src=\"img/sort-acend.png\" alt=\"a to z\"></img></button>');\n        $sortOptions.append('<button class=\"sortMovieList\" name=\"dec\"><img src=\"img/sort-decend.png\" alt=\"z to a\"></img></button>');\n        App.Collections.movies.each(function(model){\n            $($ul).append(new window.MovieItemView({model:model}).render().el);\n        });\n        return this;\n    },\n});\nwindow.MovieItemView = Backbone.View.extend({\n    tagName:\"li\",\n    className:\"\",\n    events:{\n      \"click .movieListItem\":\"changeActive\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n        //App.Collections.movies.on(\"removeActive\",\"removeActive\");\n        this.bind(\"removeActive\",this.removeActive,this);\n        this.template = _.template($(\"#template-movie-item\").html());\n        //console.log(\"template init: \",$(\"#template-movie-item\").html());\n    },\n    render:function(){\n        $(this.el).html(this.template({model:this.model.toJSON()}));\n        return this;\n    },\n    changeActive:function(){\n        console.log(\"Changing the active state\");\n        $(\".movieListItem\").parent().removeClass(\"active\");\n        App.Collections.movies.trigger(\"removeActive\");\n        $(this.el).addClass(\"active\");\n    },\n    removeActive:function(){\n        $(this.el).removeClass(\"active\");\n    }\n});\nwindow.MovieDetailView = Backbone.View.extend({\n    tagName:\"div\",\n    events:{\n      \"click .addEditContent\":\"displayAddEditForm\",\n      \"click .save\":\"saveMovie\",\n      \"click .remove\":\"removeMovie\",\n      \"click .starRating\":\"changeStarRating\",\n      \"click .addActorField\":\"addActorField\",\n      \"click .removeActorField\":\"removeActorField\",\n      \"click .addActressField\":\"addActressField\",\n      \"click .removeActressField\":\"removeActressField\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n    },\n    render:function(){\n        this.template = _.template($(\"#template-movie-details\").html());\n        var isNew = this.model.isNew();\n        $(this.el).html(this.template({model:this.model.toJSON(),isNew:isNew}));\n        return this;\n    },\n    displayAddEditForm:function(){\n        if($(\".addEditContent\").hasClass(\"btn-primary\")){\n            $(\".addEditContent\").removeClass(\"btn-primary\");\n            $(\".addEditContent\").addClass(\"btn-warning\");\n            $(\".editContent\").removeClass(\"hiddenContent\");\n            $(\".displayContent\").addClass(\"hiddenContent\");\n        }\n        else{\n            $(\".addEditContent\").removeClass(\"btn-warning\");\n            $(\".addEditContent\").addClass(\"btn-primary\");\n            $(\".editContent\").addClass(\"hiddenContent\");\n            $(\".displayContent\").removeClass(\"hiddenContent\");\n        }\n    },\n    saveMovie:function(){\n        var actorsArray = [];\n        $(\".actors\").children('input').each(function(){\n            actorsArray.push($(this).val());\n        });\n        var actressArray = [];\n        $(\".actresses\").children('input').each(function(){\n            actressArray.push($(this).val());\n        });\n        this.model.set({\n            title:$(\"#titleInput\").val(),\n            year:$(\"#yearInput\").val(),\n            director:$(\"#directorInput\").val(),\n            actors:actorsArray,\n            actresses:actressArray,\n            genre:$(\"#genreInput\").val()\n        });\n        console.log(\"Save model:\",this.model);\n        App.Collections.movies.add(this.model);\n        this.model.save();\n        App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n        this.render();\n    },\n    removeMovie:function(){\n      var yes = confirm(\"Are you sure you want to remove this movie? This action is irreversable.\");\n      if(yes){\n          this.model.destroy();\n          App.Collections.movies.remove(this.model);\n          App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n      }\n    },\n    changeStarRating:function(event){\n        var $clickedStar = $(event.currentTarget);\n        var value = $clickedStar.attr(\"rating\");\n        this.model.set({stars:value});\n        this.changeStarVisual(value);\n    },\n    changeStarVisual:function(starRating){\n        $(\".starControl\").children('img').each(function(index){\n            if(index+1 <= starRating){\n                $(this).attr('src',\"img/star-gold16.png\");\n            }\n            else{\n                $(this).attr('src',\"img/star-white16.png\");\n            }\n        });\n    },\n    addActorField:function(){\n        var $currentIcon = $(\".actors\").children(\".addActorField\").children('img');\n        $(\".actors\").children(\".removeActorField\").remove();\n        $(\".actors\").children(\".addActorField\").addClass(\"removeActorField\");\n        $(\".actors\").children(\".removeActorField\").removeClass(\"addActorField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actors\").append('<br><input type=\"text\" class=\"input-xlarge actor\">' + \n            '<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActorField:function(){\n        $(\".actors input:last\").remove();\n        $(\".actors br:last\").remove();\n        $(\".actors span\").remove();\n        $(\".actors\").children('input').each(function(){\n            $(\".actors\").children(\".removeActorField\").remove();\n            $(\".addActorField\").addClass(\"removeActorField\");\n            $(\".removeActorField\").removeClass(\"addActorField\");\n            $(\".removeActorField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    },\n    addActressField:function(){\n        var $currentIcon = $(\".actresses\").children(\".addActressField\").children('img');\n        $(\".actresses\").children(\".removeActressField\").remove();\n        $(\".actresses\").children(\".addActressField\").addClass(\"removeActressField\");\n        $(\".actresses\").children(\".removeActressField\").removeClass(\"addActressField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actresses\").append('<br><input type=\"text\" class=\"input-xlarge actresss\">' + \n            '<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActressField:function(){\n        $(\".actresses input:last\").remove();\n        $(\".actresses br:last\").remove();\n        $(\".actresses span\").remove();\n        $(\".actresses\").children('input').each(function(){\n            $(\".actresses\").children(\".removeActressField\").remove();\n            $(\".addActressField\").addClass(\"removeActressField\");\n            $(\".removeActressField\").removeClass(\"addActressField\");\n            $(\".removeActressField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    }\n});"]],"start1":0,"start2":0,"length1":0,"length2":8010}]],"length":8010,"saved":false}
{"contributors":[],"silentsave":false,"ts":1342289158676,"patch":[[{"diffs":[[0,"nder,this);\n"],[1,"        this.test=\"test var\";\n"],[0,"    },\n    e"]],"start1":730,"start2":730,"length1":24,"length2":54},{"diffs":[[0,"(model){"],[1,"console.log(\"test output: \",this.collection.test);"],[0,"\n       "]],"start1":1463,"start2":1463,"length1":16,"length2":66}]],"length":8090,"saved":false}
{"ts":1342289233008,"patch":[[{"diffs":[[0,"s);\n"],[-1,"        this.test=\"test var\";\n"],[0,"    "]],"start1":738,"start2":738,"length1":38,"length2":8},{"diffs":[[0,"el){"],[-1,"console.log(\"test output: \",this.collection.test);"],[0,"\n   "]],"start1":1437,"start2":1437,"length1":58,"length2":8}]],"length":8010,"saved":false}
{"ts":1342289670249,"patch":[[{"diffs":[[0,"mg></button>');\n"],[1,"        $sortOptions.append('<button class=\"advancedSortOptions\"><img src=\"img/options-advanced.png\" alt=\"advanced\"></img></button>');\n"],[0,"        App.Coll"]],"start1":1373,"start2":1373,"length1":32,"length2":167}]],"length":8145,"saved":false}
{"ts":1342289702047,"patch":[[{"diffs":[[0,"img></button>');"],[1," "],[0,"\n        App.Col"]],"start1":1507,"start2":1507,"length1":32,"length2":33}]],"length":8146,"saved":false}
{"ts":1342289900770,"patch":[[{"diffs":[[0,"/options"],[-1,"-"],[1,"_"],[0,"advanced"]],"start1":1467,"start2":1467,"length1":17,"length2":17}]],"length":8146,"saved":false}
{"ts":1342289939106,"patch":[[{"diffs":[[0,"></img></button>"],[1," "],[0,"');\n        $sor"]],"start1":1236,"start2":1236,"length1":32,"length2":33},{"diffs":[[0,"/button>"],[1," "],[0,"');\n    "]],"start1":1378,"start2":1378,"length1":16,"length2":17},{"diffs":[[0,"/button>"],[1," "],[0,"'); \n   "]],"start1":1514,"start2":1514,"length1":16,"length2":17}]],"length":8149,"saved":false}
{"contributors":[],"silentsave":false,"ts":1348961278201,"patch":[[{"diffs":[[0,"List"],[-1,"View = Backbone.View.extend({\n    tagName:\"ul\",\n    className:\"nav nav-pills nav-stacked\",\n    initialize:function(){\n        _.bindAll(this,'render');\n        App.Collections.movies.bind(\"add\",this.render,this);\n        App.Collections.movies.bind(\"reset\",this.render,this);\n        App.Collections.movies.bind(\"remove\",this.render,this);\n    },\n    events:{\n        \"click .sortMovieList\":\"sortMovieList\"\n    },\n    sortMovieList:function(event){\n        var sortType = $(event.currentTarget.attributes.name).val();\n        this.collection.sortMovieList(sortType);\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        var $sortOptions = $($ul).append('<div id=\"sortOptions\"></div>');\n        $sortOptions.append('<button class=\"sortMovieList\" name=\"asc\"><img src=\"img/sort-acend.png\" alt=\"a to z\"></img></button> ');\n        $sortOptions.append('<button class=\"sortMovieList\" name=\"dec\"><img src=\"img/sort-decend.png\" alt=\"z to a\"></img></button> ');\n        $sortOptions.append('<button class=\"advancedSortOptions\"><img src=\"img/options_advanced.png\" alt=\"advanced\"></img></button> '); \n        App.Collections.movies.each(function(model){\n            $($ul).append(new window.MovieItemView({model:model}).render().el);\n        });\n        return this;\n    },\n});\nwindow.MovieItemView = Backbone.View.extend({\n    tagName:\"li\",\n    className:\"\",\n    events:{\n      \"click .movieListItem\":\"changeActive\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n        //App.Collections.movies.on(\"removeActive\",\"removeActive\");\n        this.bind(\"removeActive\",this.removeActive,this);\n        this.template = _.template($(\"#template-movie-item\").html());\n        //console.log(\"template init: \",$(\"#template-movie-item\").html());\n    },\n    render:function(){\n        $(this.el).html(this.template({model:this.model.toJSON()}));\n        return this;\n    },\n    changeActive:function(){\n        console.log(\"Changing the active state\");\n        $(\".movieListItem\").parent().removeClass(\"active\");\n        App.Collections.movies.trigger(\"removeActive\");\n        $(this.el).addClass(\"active\");\n    },\n    removeActive:function(){\n        $(this.el).removeClass(\"active\");\n    }\n});\nwindow.MovieDetailView = Backbone.View.extend({\n    tagName:\"div\",\n    events:{\n      \"click .addEditContent\":\"displayAddEditForm\",\n      \"click .save\":\"saveMovie\",\n      \"click .remove\":\"removeMovie\",\n      \"click .starRating\":\"changeStarRating\",\n      \"click .addActorField\":\"addActorField\",\n      \"click .removeActorField\":\"removeActorField\",\n      \"click .addActressField\":\"addActressField\",\n      \"click .removeActressField\":\"removeActressField\"\n    },\n    initialize:function(){\n        _.bindAll(this,'render');\n    },\n    render:function(){\n        this.template = _.template($(\"#template-movie-details\").html());\n        var isNew = this.model.isNew();\n        $(this.el).html(this.template({model:this.model.toJSON(),isNew:isNew}));\n        return this;\n    },\n    displayAddEditForm:function(){\n        if($(\".addEditContent\").hasClass(\"btn-primary\")){\n            $(\".addEditContent\").removeClass(\"btn-primary\");\n            $(\".addEditContent\").addClass(\"btn-warning\");\n            $(\".editContent\").removeClass(\"hiddenContent\");\n            $(\".displayContent\").addClass(\"hiddenContent\");\n        }\n        else{\n            $(\".addEditContent\").removeClass(\"btn-warning\");\n            $(\".addEditContent\").addClass(\"btn-primary\");\n            $(\".editContent\").addClass(\"hiddenContent\");\n            $(\".displayContent\").removeClass(\"hiddenContent\");\n        }\n    },\n    saveMovie:function(){\n        var actorsArray = [];\n        $(\".actors\").children('input').each(function(){\n            actorsArray.push($(this).val());\n        });\n        var actressArray = [];\n        $(\".actresses\").children('input').each(function(){\n            actressArray.push($(this).val());\n        });\n        this.model.set({\n            title:$(\"#titleInput\").val(),\n            year:$(\"#yearInput\").val(),\n            director:$(\"#directorInput\").val(),\n            actors:actorsArray,\n            actresses:actressArray,\n            genre:$(\"#genreInput\").val()\n        });\n        console.log(\"Save model:\",this.model);\n        App.Collections.movies.add(this.model);\n        this.model.save();\n        App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n        this.render();\n    },\n    removeMovie:function(){\n      var yes = confirm(\"Are you sure you want to remove this movie? This action is irreversable.\");\n      if(yes){\n          this.model.destroy();\n          App.Collections.movies.remove(this.model);\n          App.Routers.mediaRouter.navigate(\"#movies\",{trigger:true});\n      }\n    },\n    changeStarRating:function(event){\n        var $clickedStar = $(event.currentTarget);\n        var value = $clickedStar.attr(\"rating\");\n        this.model.set({stars:value});\n        this.changeStarVisual(value);\n    },\n    changeStarVisual:function(starRating){\n        $(\".starControl\").children('img').each(function(index){\n            if(index+1 <= starRating){\n                $(this).attr('src',\"img/star-gold16.png\");\n            }\n            else{\n                $(this).attr('src',\"img/star-white16.png\");\n            }\n        });\n    },\n    addActorField:function(){\n        var $currentIcon = $(\".actors\").children(\".addActorField\").children('img');\n        $(\".actors\").children(\".removeActorField\").remove();\n        $(\".actors\").children(\".addActorField\").addClass(\"removeActorField\");\n        $(\".actors\").children(\".removeActorField\").removeClass(\"addActorField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actors\").append('<br><input type=\"text\" class=\"input-xlarge actor\">' + \n            '<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActorField:function(){\n        $(\".actors input:last\").remove();\n        $(\".actors br:last\").remove();\n        $(\".actors span\").remove();\n        $(\".actors\").children('input').each(function(){\n            $(\".actors\").children(\".removeActorField\").remove();\n            $(\".addActorField\").addClass(\"removeActorField\");\n            $(\".removeActorField\").removeClass(\"addActorField\");\n            $(\".removeActorField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActorField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    },\n    addActressField:function(){\n        var $currentIcon = $(\".actresses\").children(\".addActressField\").children('img');\n        $(\".actresses\").children(\".removeActressField\").remove();\n        $(\".actresses\").children(\".addActressField\").addClass(\"removeActressField\");\n        $(\".actresses\").children(\".removeActressField\").removeClass(\"addActressField\");\n        $($currentIcon).attr('src',\"img/minus-white.png\");\n        $(\".actresses\").append('<br><input type=\"text\" class=\"input-xlarge actresss\">' + \n            '<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n    },\n    removeActressField:function(){\n        $(\".actresses input:last\").remove();\n        $(\".actresses br:last\").remove();\n        $(\".actresses span\").remove();\n        $(\".actresses\").children('input').each(function(){\n            $(\".actresses\").children(\".removeActressField\").remove();\n            $(\".addActressField\").addClass(\"removeActressField\");\n            $(\".removeActressField\").removeClass(\"addActressField\");\n            $(\".removeActressField\").children('img').attr('src',\"img/minus-white.png\");\n            $(this).after('<span class=\"addActressField\"><img src=\"img/plus-white.png\"</span>');\n            console.log(this);\n        });\n    }\n});window.HeaderView = Backbone.View.extend({\n    initialize:function(){\n      _.bindAll(this,'render');  \n    },\n        tagName:\"div\",\n        className:\"navbar navbar-fixed-top\",\n        template : _.template($(\"#template-header\").html()),\n    \n    render:function(){\n        console.log(\"Rendering the header\");\n        $(this.el).html(this.template());\n        return this;\n    }"],[1,"MasterView = Backbone.View.extend({\n    tagName:\"div\",\n    initialize:function(){\n        _.bindAll(this,'render');\n    },\n    events:{\n    },\n    render:function(){\n        this.SubViews = {};\n        this.SubViews.searchView = new window.MovieListSearchView({collection:this.collection});\n        this.SubViews.listView = new window.MovieListView({collection:this.collection});\n        $(this.el).append(this.SubViews.searchView.render().el);\n        $(this.el).append(this.SubViews.listView.render().el);\n        return this;\n    }\n});\nwindow.MovieListSearchView = Backbone.View.extend({\n    tagName:\"div\",\n    initialize:function(){console.log(this.queryKeyWords);\n        _.bindAll(this,'render');\n        this.template = _.template($(\"#template-movie-list-search\").html());\n    },\n    events:{\n        \"click .sortMovieList\":\"sortMovieList\",\n        \"click .showAdvancedSortOptions\":\"showAdvancedSortOptions\",\n        \"click .advancedSort\":\"advancedSort\",\n        \"click .removeFilter\":\"removeFilter\",\n        \"keyup .search-query\":\"searchBarFilter\"\n    },\n    searchBarFilter:function(event){\n        if(this.isCharHandled(event)){\n            var query = event.currentTarget.value;\n            switch(query){\n                default:\n                    console.log(\"this is the one\");\n                break;\n            }\n        }\n    },\n    isCharHandled:function(evt){console.log(evt.which);\n        if (typeof evt.which == \"undefined\") {\n            return true;\n        } \n        else if (typeof evt.which == \"number\" && evt.which > 0) {\n            return !evt.ctrlKey && !evt.metaKey && !evt.altKey \n                && evt.which != 16;\n        }\n        return false;   \n    },\n    render:function(){\n        $(this.el).html(this.template());\n        return this;\n    },\n    showAdvancedSortOptions:function(){//TODO: turn this into a view\n        var header = \"<h3>Advanced movie sorting options</h3>\";\n        var body = _.template($(\"#movie-list-filter-body\").html(),{\"model\":\"value to set\"});\n        var footer = '<a href=\"#\" class=\"btn\" data-dismiss=\"modal\">Close</a>'+\n                     '<button type=\"button\" class=\"btn btn-primary advancedSort\">Sort</button>';\n        utils.injectModal(this.$el,header,body,footer);\n        $(\"#primaryModal\").modal(\"toggle\");\n    },\n    advancedSort:function(){\n        var testVal = $(\"#testing\").val();\n        console.log(\"the extracted value is: \",testVal);\n        this.collection.models = this.collection.filter(function(movie){\n            return movie.get(\"stars\") <= \"3\";\n        });\n        $(\"#primaryModal\").modal(\"toggle\");\n        this.render();\n    },\n    sortMovieList:function(event){\n        var sortType = $(event.currentTarget.attributes.name).val();\n        this.collection.sortMovieList(sortType);\n    },\n    removeFilter:function(){\n        App.Collections.movies.fetch();\n    },"],[0,"\n});"]],"start1":398,"start2":398,"length1":8136,"length2":2874},{"diffs":[[0,"    "],[-1,"render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        //this.collection.each(function(model){\n        App.Collections.movies"],[1,"events:{\n        \"click .removeFilter\":function(){console.log(\"Remove filter caught\")}\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        this.collection"],[0,".eac"]],"start1":3636,"start2":3636,"length1":156,"length2":199}]],"length":10422,"saved":false}
{"contributors":[],"silentsave":false,"ts":1349067109177,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(\"Rendering the header\");\n        "],[0,""],[1,""],[0,"$(th"]],"start1":272,"start2":272,"length1":53,"length2":8},{"diffs":[[0,"   events:{\n"],[1,"        \"click .pager\":\"changePage\"\n    },\n    changePage:function(event){\n        console.log(event);\n        console.log($(event).attr('data-direction'));\n"],[0,"    },\n    r"]],"start1":481,"start2":481,"length1":24,"length2":181},{"diffs":[[0,"w.render().el);\n"],[1,"        $(this.el).append(_.template($(\"#template-pagination-controls\").html()));\n"],[0,"        return t"]],"start1":1006,"start2":1006,"length1":32,"length2":114},{"diffs":[[0,"n(){"],[-1,"console.log(this.queryKeyWords);"],[0,""],[1,""],[0,"\n   "]],"start1":1228,"start2":1228,"length1":40,"length2":8},{"diffs":[[0,"    "],[-1,"switch(query){\n                default:\n                    console.log(\"this is the one\");\n                break;\n            }"],[1,"var newCollection=[];\n            query = query.toLowerCase();\n            query = query.split(\",\");\n            _.each(query,function(searchValue){\n                App.Collections.movies.fetch({trigger:false});\n                var key = searchValue.substring(0,searchValue.indexOf(\":\"));\n                var searchString = searchValue.substring(searchValue.indexOf(\":\")+1);\n                var validKeys = _.keys(App.Collections.movies.models[0].attributes);\n                if(validKeys.indexOf(key) < 0){\n                    key = \"title\";\n                }\n                newCollection = _.union(newCollection,App.Collections.movies.filter(function(movie){\n                        return movie.get(key).toString().toLowerCase().indexOf(searchString) >= 0;\n                    }));\n            });\n            this.collection.reset(newCollection);"],[0,"\n   "]],"start1":1762,"start2":1762,"length1":136,"length2":859},{"diffs":[[0,"vt){"],[-1,"console.log(evt.which);"],[0,"\n   "]],"start1":2663,"start2":2663,"length1":31,"length2":8},{"diffs":[[0,"es.fetch();\n"],[1,"        App.Collections.movies.trigger(\"test\");\n        $(\".search-query\").val(\"\");\n"],[0,"    },\n});\nw"]],"start1":4112,"start2":4112,"length1":24,"length2":108},{"diffs":[[0,"(\"reset\",this.re"],[-1,"nder"],[1,"setCollection"],[0,",this);\n        "]],"start1":4483,"start2":4483,"length1":36,"length2":45},{"diffs":[[0,"    "],[-1,"},\n"],[0,"    "],[-1,"events:{\n        \"click .removeFilter\":function(){console.log(\"Remove filter caught\")}\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        this.c"],[1,"App.Collections.movies.bind(\"change\",this.render,this);\n        this.recordsPerPage = 10;\n        this.currentPage = 0;\n        this.lastPage = 0;\n    },\n    events:{\n        \n    },\n    resetCollection:function(){\n        this.currentPage = 0;\n        this.render();\n    },\n    render:function(){\n        var $ul = this.el;\n        $($ul).empty();\n        var start = this.recordsPerPage * this.currentPage;\n        var end = start + this.recordsPerPage;\n        var tmpCollection = _.clone(this.collection);\n        tmpCollection.models = tmpCollection.models.slice(start,end);\n        this.lastPage = Math.floor(tmpCollection.length / this.recordsPerPage);\n        tmpC"],[0,"olle"]],"start1":4584,"start2":4584,"length1":197,"length2":684}]],"length":11864,"saved":false}
{"contributors":[],"silentsave":false,"ts":1349499311927,"patch":[[{"diffs":[[0,"tring) >"],[-1,"="],[0," 0;\n    "]],"start1":2514,"start2":2514,"length1":17,"length2":16}]],"length":11863,"saved":false}
{"ts":1349499542107,"patch":[[{"diffs":[[0,"f(\":\"));"],[1,"console.log(key);"],[0,"\n       "]],"start1":2046,"start2":2046,"length1":16,"length2":33},{"diffs":[[0,"\":\")+1);"],[1,"console.log(searchString);"],[0,"\n       "]],"start1":2149,"start2":2149,"length1":16,"length2":42},{"diffs":[[0,"tring) >"],[1,"="],[0," 0;\n    "]],"start1":2557,"start2":2557,"length1":16,"length2":17}]],"length":11907,"saved":false}
{"ts":1349499763679,"patch":[[{"diffs":[[0,"\"));"],[-1,"console.log(key);"],[0,"\n   "]],"start1":2050,"start2":2050,"length1":25,"length2":8},{"diffs":[[0,"+1);"],[-1,"console.log(searchString);"],[0,"\n   "]],"start1":2136,"start2":2136,"length1":34,"length2":8}]],"length":11864,"saved":false}
{"ts":1349499815303,"patch":[[{"diffs":[[0,"e = "],[-1,"10"],[1,"2"],[0,";\n  "]],"start1":4674,"start2":4674,"length1":10,"length2":9}]],"length":11863,"saved":false}
{"ts":1349500165389,"patch":[[{"diffs":[[0,"rection'));\n"],[1,"        window.test = event.target;\n"],[0,"    },\n    r"]],"start1":638,"start2":638,"length1":24,"length2":60}]],"length":11899,"saved":false}
{"ts":1349500293176,"patch":[[{"diffs":[[0,"t = "],[1,"$("],[0,"event"],[-1,".target"],[1,")"],[0,";\n  "]],"start1":668,"start2":668,"length1":20,"length2":16}]],"length":11895,"saved":false}
{"ts":1349500551519,"patch":[[{"diffs":[[0,"est = $("],[-1,"event"],[1,"this).attr('data-direction'"],[0,");\n    }"]],"start1":666,"start2":666,"length1":21,"length2":43}]],"length":11917,"saved":false}
{"ts":1349500890203,"patch":[[{"diffs":[[0,"($(event"],[1,".target"],[0,").attr('"]],"start1":615,"start2":615,"length1":16,"length2":23}]],"length":11924,"saved":false}
{"ts":1349500942960,"patch":[[{"diffs":[[0,"t = "],[-1,"$(this).attr('data-direction')"],[1,"event"],[0,";\n  "]],"start1":675,"start2":675,"length1":38,"length2":13}]],"length":11899,"saved":false}
{"ts":1349501163767,"patch":[[{"diffs":[[0,"t.target"],[1,".parentElement"],[0,").attr('"]],"start1":622,"start2":622,"length1":16,"length2":30}]],"length":11913,"saved":false}
{"ts":1349501563242,"patch":[[{"diffs":[[0,"    "],[-1,"console.log(event);\n        console.log("],[1,"var direction = "],[0,"$(ev"]],"start1":572,"start2":572,"length1":48,"length2":24},{"diffs":[[0,"ection')"],[-1,")"],[0,";\n      "]],"start1":636,"start2":636,"length1":17,"length2":16},{"diffs":[[0,"    "],[-1,"window.test = event"],[1,"this.collection.trigger(\"pageinate,\"+direction)"],[0,";\n  "]],"start1":650,"start2":650,"length1":27,"length2":55},{"diffs":[[0,"s.render,this);\n"],[1,"        App.Collections.movies.bind(\"pageinate\",function(){console.log(\"paging\")});\n"],[0,"        this.rec"]],"start1":4685,"start2":4685,"length1":32,"length2":116}]],"length":12000,"saved":false}
{"ts":1349501586185,"patch":[[{"diffs":[[0,".movies."],[-1,"bind"],[1,"on"],[0,"(\"pagein"]],"start1":4724,"start2":4724,"length1":20,"length2":18}]],"length":11998,"saved":false}
{"ts":1349501687952,"patch":[[{"diffs":[[0,"tion');\n        "],[-1,"this.c"],[1,"App.C"],[0,"ollection.trigge"]],"start1":638,"start2":638,"length1":38,"length2":37},{"diffs":[[0,"llection"],[1,"s.movies"],[0,".trigger"]],"start1":660,"start2":660,"length1":16,"length2":24}]],"length":12005,"saved":false}
{"ts":1349501720861,"patch":[[{"diffs":[[0,"nate"],[-1,",\"+direction"],[1,"\""],[0,");\n "]],"start1":691,"start2":691,"length1":20,"length2":9}]],"length":11994,"saved":false}
{"ts":1349501776987,"patch":[[{"diffs":[[0,"tion');\n        "],[1,"//"],[0,"App.Collections."]],"start1":638,"start2":638,"length1":32,"length2":34},{"diffs":[[0,"ageinate\");\n"],[1,"        this.collection.trigger(\"pageinate\");\n"],[0,"    },\n    r"]],"start1":689,"start2":689,"length1":24,"length2":70}]],"length":12042,"saved":false}
{"ts":1349501819968,"patch":[[{"diffs":[[0,"r(\"pageinate"],[-1,"\""],[1,",\"+direction"],[0,");\n    },\n  "]],"start1":731,"start2":731,"length1":25,"length2":36},{"diffs":[[0,"unction("],[1,"dir"],[0,"){consol"]],"start1":4803,"start2":4803,"length1":16,"length2":19}]],"length":12056,"saved":false}
{"ts":1349502135576,"patch":[[{"diffs":[[0,"nate"],[1,"\""],[0,","],[-1,"\"+"],[0,"dire"]],"start1":739,"start2":739,"length1":11,"length2":10}]],"length":12055,"saved":false}
{"ts":1349502164729,"patch":[[{"diffs":[[0,"log("],[-1,"\"paging\""],[1,"dir"],[0,")});"]],"start1":4823,"start2":4823,"length1":16,"length2":11}]],"length":12050,"saved":false}
{"ts":1349502246164,"patch":[[{"diffs":[[0,".movies."],[-1,"on"],[1,"bind"],[0,"(\"pagein"]],"start1":4778,"start2":4778,"length1":18,"length2":20}]],"length":12052,"saved":false}
{"ts":1349502482947,"patch":[[{"diffs":[[0,"    \n    },\n"],[1,"    paginate:function(direction){\n        switch(direction){\n            case 'forward':\n                this.currentPage++;\n                break;\n            case 'back':\n                this.currentPage--;\n                break;\n        }\n        this.render();\n    },\n"],[0,"    resetCol"]],"start1":4951,"start2":4951,"length1":24,"length2":296}]],"length":12324,"saved":false}
{"ts":1349502529301,"patch":[[{"diffs":[[0,"te\","],[-1,"function(dir){console.log(dir)}"],[1,"this.paginate,this"],[0,");\n "]],"start1":4799,"start2":4799,"length1":39,"length2":26}]],"length":12311,"saved":false}
{"ts":1349502697683,"patch":[[{"diffs":[[0,"Page++;\n"],[1,"                if(this.currentPage > this.lastPage)\n                    this.currentPage = 0;\n"],[0,"        "]],"start1":5067,"start2":5067,"length1":16,"length2":111}]],"length":12406,"saved":false}
{"ts":1349502766651,"patch":[[{"diffs":[[0,"Page--;\n"],[1,"                if(this.currentPage < 0)\n                    this.currentPage = this.lastPage;\n"],[0,"        "]],"start1":5246,"start2":5246,"length1":16,"length2":111}]],"length":12501,"saved":false}
{"ts":1349502806093,"patch":[[{"diffs":[[0,"e = "],[-1,"2"],[1,"10"],[0,";\n  "]],"start1":4850,"start2":4850,"length1":9,"length2":10}]],"length":12502,"saved":false}
{"ts":1349502855300,"patch":[[{"diffs":[[0,"unction(event){\n"],[1,"        event.preventDefault();\n"],[0,"        var dire"]],"start1":552,"start2":552,"length1":32,"length2":64},{"diffs":[[0,"');\n"],[-1,"        //App.Collections.movies.trigger(\"pageinate\");\n"],[0,"    "]],"start1":674,"start2":674,"length1":63,"length2":8}]],"length":12479,"saved":false}
{"ts":1349502881178,"patch":[[{"diffs":[[0,"Page = 1"],[-1,"0"],[0,";\n      "]],"start1":4824,"start2":4824,"length1":17,"length2":16}]],"length":12478,"saved":false}
{"ts":1349502913518,"patch":[[{"diffs":[[0,"rPage = "],[-1,"1"],[1,"2"],[0,";\n      "]],"start1":4823,"start2":4823,"length1":17,"length2":17}]],"length":12478,"saved":false}
{"ts":1349502937816,"patch":[[{"diffs":[[0,"e = "],[-1,"2"],[1,"10"],[0,";\n  "]],"start1":4827,"start2":4827,"length1":9,"length2":10}]],"length":12479,"saved":false}
