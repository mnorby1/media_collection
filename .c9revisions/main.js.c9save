{"ts":1342066318872,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var MediaRouter = Backbone.Router.extend({\n    initialize:function(){\n        console.log(\"The router is init.\");\n        /*************\n         * Renders the header when router is initialized. So its always here.\n         */\n        App.Views.headerView = new HeaderView();\n        $(\".header\").html(App.Views.headerView.render().el);\n    },\n    routes: {\n        \"\": \"home\",\n        \"movies\":\"movieList\",\n        \"movies/:movie\":\"movieDetails\"\n    },\n    home: function(){\n        console.log(\"Initilizing home\");\n        /*************\n         * Remove the active class from all elements in header. Add it to the \n         * correct one.\n         */\n        $(\".fc_header\").removeClass(\"active\");\n        $(\"#fc_home\").addClass(\"active\");\n    },\n    movieList:function()\n    {\n        console.log(\"Routing for movie display\");\n        /*************\n         * Remove the active class from all elements in header. Add it to the \n         * correct one.\n         */\n        $(\".fc_header\").removeClass(\"active\");\n        $(\"#fc_movies\").addClass(\"active\");\n        App.Collections.movies = new window.Movies();\n        App.Collections.movies.fetch({\n            success:function(){\n                App.Views.movieListView = new MovieListView({collection:App.Collections.movies});\n                App.Views.movieDetailView = new MovieDetailView({model:new Movie(),collection:App.Collections.movies});\n                $(\"#leftbar\").html(App.Views.movieListView.render().el);\n                $(\"#content\").html(App.Views.movieDetailView.render().el);\n            },\n            error:function(){\n                console.log(\"There was an error retrieving the movie list data\");\n            }\n        });    \n    },\n    movieDetails:function(movie){\n        var currentModel = App.Collections.movies.get(movie);\n        App.Views.movieDetailView = new MovieDetailView({model:currentModel});\n        $(\"#content\").html(App.Views.movieDetailView.render().el);\n    }\n});\n/*************\n * Waits for the document to be ready then creates a new router and starts backbone\n */\n$(document).ready(function(){\n    //var mediaRouter = new MediaRouter;\n    App.Routers.mediaRouter = new MediaRouter;\n    Backbone.history.start();\n});"]],"start1":0,"start2":0,"length1":0,"length2":2222}]],"length":2222}
